<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Mia’s Drill Press Safety — Questions 1–10</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  /* Reuse the professional dark theme from improved version */
  :root {
    --bg: #0a192f;
    --card-bg: #112240;
    --primary: #64ffda;
    --secondary: #a8b2d1;
    --text-light: #ccd6f6;
    --text-muted: #8892b0;
    --button-bg: #2563eb;
    --button-hover: #1e40af;
    --success: #22c55e;
    --warning: #f59e0b;
    --error: #ef4444;
  }
  body {
    margin: 0;
    background: var(--bg);
    color: var(--text-light);
    font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Helvetica,Arial,sans-serif;
    line-height: 1.5;
    font-size: 16px;
  }
  main {
    max-width: 960px;
    margin: 0 auto;
    padding: 24px;
  }
  header {
    margin-bottom: 16px;
  }
  header h1 {
    margin: 0 0 8px;
    font-size: 1.8rem;
    color: var(--primary);
  }
  header p {
    margin: 0;
    color: var(--text-muted);
  }
  .scenario {
    background: var(--card-bg);
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    margin-bottom: 24px;
  }
  .scenario h2 {
    font-size: 1.4rem;
    margin-top: 0;
    color: var(--primary);
  }
  .scenario p {
    margin: 0.5rem 0;
    color: var(--secondary);
  }
  section.item {
    background: var(--card-bg);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 24px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  }
  section.item h2 {
    font-size: 1.3rem;
    margin-top: 0;
    color: var(--primary);
  }
  section.item p {
    margin-top: 0;
    margin-bottom: 8px;
    color: var(--secondary);
  }
  label.block {
    display: block;
    font-weight: 500;
    margin-bottom: 4px;
    color: var(--text-light);
  }
  textarea, input[type="text"], input[type="number"], select {
    width: 100%;
    padding: 10px;
    margin: 4px 0 12px 0;
    background: #0b2545;
    border: 1px solid #1e3a60;
    border-radius: 8px;
    color: var(--text-light);
  }
  textarea::placeholder, input::placeholder {
    color: var(--text-muted);
  }
  select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
  }
  fieldset {
    border: none;
    margin: 0 0 12px 0;
    padding: 0;
  }
  .option {
    display: block;
    margin-bottom: 6px;
  }
  .option input {
    margin-right: 8px;
  }
  .hint {
    color: var(--text-muted);
    font-size: 0.9rem;
  }
  .controls {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-top: 12px;
  }
  button {
    background: var(--button-bg);
    border: none;
    border-radius: 8px;
    padding: 10px 16px;
    font-size: 1rem;
    cursor: pointer;
    color: #f8fafc;
    transition: background 0.2s ease;
  }
  button:hover {
    background: var(--button-hover);
  }
  output {
    display: block;
    min-height: 1.3rem;
    margin-top: 4px;
    color: var(--text-muted);
  }
  .success { color: var(--success); }
  .warning { color: var(--warning); }
  .error { color: var(--error); }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 12px;
  }
  th, td {
    border: 1px solid #1e3a60;
    padding: 6px;
    text-align: center;
    color: var(--text-light);
  }
  th[scope="row"] {
    text-align: left;
  }
</style>
</head>
<body>
<main>
  <header>
    <h1>Mia’s Drill Press Safety — Questions 1–10</h1>
    <p class="hint">Answer each question below. When finished, click “Submit Answers” to view feedback and see your results in the console. This page will later be connected to other scenarios.</p>
  </header>

  <section class="scenario" aria-labelledby="scenario-title">
    <h2 id="scenario-title">Scenario</h2>
    <p>During her first drill press session, <strong>Mia</strong> rushes to drill four 6&nbsp;mm holes in a 3&nbsp;mm steel strap for a shelf bracket. She leaves her long hair untied and keeps her fabric gloves on from cleanup. In a hurry, she leaves the <strong>chuck key in the chuck</strong>, doesn’t clamp the work, and lines up the mark while holding the strap by hand. She switches the drill on; the strap snatches and spins, and a long ribbon of swarf starts coiling. Mia leans closer and reaches in to brush the swarf away with her gloved hand. She’s wearing <strong>no safety glasses</strong>. The teacher hits the emergency stop and halts the task.</p>
  </section>

  <!-- Q1 -->
  <section id="q1" class="item" aria-labelledby="q1-title">
    <h2 id="q1-title">1 · Identify the first unsafe action</h2>
    <p>Please justify your answer with at least 15 words by referencing the scenario details that reveal the first unsafe action.</p>
    <label for="q1-reason" class="block">Your reasoning:</label>
    <textarea id="q1-reason" name="q1_reason" rows="4" required aria-required="true"></textarea>
    <p class="hint">Focus on the moment she starts the drill.</p>
    <fieldset>
      <legend class="sr-only">Select the first unsafe action</legend>
      <label class="option"><input type="radio" name="q1_choice" value="key-in" required> Started the drill with the chuck key still in the chuck</label>
      <label class="option"><input type="radio" name="q1_choice" value="held-hand"> Held the strap by hand instead of clamping</label>
      <label class="option"><input type="radio" name="q1_choice" value="lean"> Leaned close to the spinning drill</label>
      <label class="option"><input type="radio" name="q1_choice" value="swarf-reach"> Reached for swarf with her gloved hand</label>
    </fieldset>
    <output id="q1-feedback" role="status" aria-live="polite"></output>
  </section>

  <!-- Q2 -->
  <section id="q2" class="item" aria-labelledby="q2-title">
    <h2 id="q2-title">2 · True or False — Gloves at the Drill Press</h2>
    <p>First, in at least 5 words, explain why wearing gloves at a drill press is unsafe. Then decide if wearing gloves is recommended.</p>
    <label for="q2-reason" class="block">Your explanation:</label>
    <textarea id="q2-reason" name="q2_reason" rows="3" required aria-required="true"></textarea>
    <fieldset>
      <legend class="sr-only">Is wearing gloves recommended at the drill press?</legend>
      <label class="option"><input type="radio" name="q2_choice" value="true" required> True</label>
      <label class="option"><input type="radio" name="q2_choice" value="false"> False</label>
    </fieldset>
    <output id="q2-feedback" role="status" aria-live="polite"></output>
  </section>

  <!-- Q3 -->
  <section id="q3" class="item" aria-labelledby="q3-title">
    <h2 id="q3-title">3 · Hazard Identification (Select all that apply)</h2>
    <p>Select <strong>all hazards</strong> that were present at Mia’s workstation when she began drilling.</p>
    <label class="option"><input type="checkbox" name="q3_choice" value="hair-untied"> Untied long hair</label>
    <label class="option"><input type="checkbox" name="q3_choice" value="gloves"> Wearing fabric gloves near rotating spindle</label>
    <label class="option"><input type="checkbox" name="q3_choice" value="key-left"> Chuck key left in the chuck</label>
    <label class="option"><input type="checkbox" name="q3_choice" value="unclamped"> Unclamped workpiece</label>
    <label class="option"><input type="checkbox" name="q3_choice" value="no-glasses"> No safety glasses</label>
    <label class="option"><input type="checkbox" name="q3_choice" value="reach-swarf"> Reaching for swarf while drill running</label>
    <label class="option"><input type="checkbox" name="q3_choice" value="leaning-close"> Leaning close to the spinning drill</label>
    <label class="option"><input type="checkbox" name="q3_choice" value="correct-speed"> Spindle speed set correctly</label>
    <label class="option"><input type="checkbox" name="q3_choice" value="clamped"> Work properly clamped</label>
    <label for="q3-other" class="block">Add one more hazard in your own words:</label>
    <textarea id="q3-other" name="q3_other" rows="2" placeholder="e.g., loose jewellery near spindle"></textarea>
    <output id="q3-feedback" role="status" aria-live="polite"></output>
  </section>

  <!-- Q4 -->
  <section id="q4" class="item" aria-labelledby="q4-title">
    <h2 id="q4-title">4 · Immediate Action — Chuck Key in the Chuck</h2>
    <p>As you see the chuck key still in the chuck while the spindle is starting to turn, what should you do <strong>immediately</strong>?</p>
    <select name="q4_choice" id="q4-choice" required aria-required="true">
      <option value="">-- choose --</option>
      <option value="stop-remove">Stop the drill (hit E‑stop or power off), wait for the spindle to stop, remove the key, and stow it properly</option>
      <option value="grab">Try to grab the key quickly while the drill is running</option>
      <option value="ignore">Continue drilling and hope the key falls out</option>
      <option value="friend">Ask a friend to hold the key while you drill</option>
    </select>
    <output id="q4-feedback" role="status" aria-live="polite"></output>
  </section>

  <!-- Q5 -->
  <section id="q5" class="item" aria-labelledby="q5-title">
    <h2 id="q5-title">5 · Short Answer — Why No Gloves and Why Glasses</h2>
    <p>In one sentence, explain why gloves are unsafe at a drill press and why safety glasses are essential. Focus on <em>entanglement</em> and protection from <em>flying fragments</em> or swarf.</p>
    <textarea id="q5-answer" name="q5_answer" rows="3" required aria-required="true"></textarea>
    <output id="q5-feedback" role="status" aria-live="polite"></output>
  </section>

  <!-- Q6 -->
  <section id="q6" class="item" aria-labelledby="q6-title">
    <h2 id="q6-title">6 · Numeric — Adjusting Guard Clearance</h2>
    <p>The drill guard should be within <strong>5 mm</strong> of the work. It’s currently <strong>12 mm</strong> away. How many millimetres should you <strong>lower</strong> the guard?</p>
    <input type="number" id="q6-answer" name="q6_answer" min="0" step="1" required aria-required="true"> mm
    <output id="q6-feedback" role="status" aria-live="polite"></output>
  </section>

  <!-- Q7 -->
  <section id="q7" class="item" aria-labelledby="q7-title">
    <h2 id="q7-title">7 · Match Hazards to Controls</h2>
    <p>For each hazard below, select the most appropriate control. These controls help prevent injuries when using a drill press.</p>
    <table role="table">
      <thead><tr><th>Hazard</th><th>Control</th></tr></thead>
      <tbody>
        <tr>
          <th scope="row">Untied hair or loose clothing</th>
          <td>
            <select name="q7_row1" required aria-required="true">
              <option value="">-- select control --</option>
              <option value="tie">Tie back hair / wear cap / remove cords</option>
              <option value="clamp">Clamp work securely in a vice or with clamps</option>
              <option value="brush">Stop machine; clear swarf with brush</option>
              <option value="key">Remove chuck key and use a spring-return key or holder</option>
            </select>
          </td>
        </tr>
        <tr>
          <th scope="row">Unclamped workpiece</th>
          <td>
            <select name="q7_row2" required aria-required="true">
              <option value="">-- select control --</option>
              <option value="tie">Tie back hair / wear cap / remove cords</option>
              <option value="clamp">Clamp work securely in a vice or with clamps</option>
              <option value="brush">Stop machine; clear swarf with brush</option>
              <option value="key">Remove chuck key and use a spring-return key or holder</option>
            </select>
          </td>
        </tr>
        <tr>
          <th scope="row">Swarf coils or ribbons building up</th>
          <td>
            <select name="q7_row3" required aria-required="true">
              <option value="">-- select control --</option>
              <option value="tie">Tie back hair / wear cap / remove cords</option>
              <option value="clamp">Clamp work securely in a vice or with clamps</option>
              <option value="brush">Stop machine; clear swarf with brush</option>
              <option value="key">Remove chuck key and use a spring-return key or holder</option>
            </select>
          </td>
        </tr>
        <tr>
          <th scope="row">Chuck key left in the chuck</th>
          <td>
            <select name="q7_row4" required aria-required="true">
              <option value="">-- select control --</option>
              <option value="tie">Tie back hair / wear cap / remove cords</option>
              <option value="clamp">Clamp work securely in a vice or with clamps</option>
              <option value="brush">Stop machine; clear swarf with brush</option>
              <option value="key">Remove chuck key and use a spring-return key or holder</option>
            </select>
          </td>
        </tr>
      </tbody>
    </table>
    <output id="q7-feedback" role="status" aria-live="polite"></output>
  </section>

  <!-- Q8 -->
  <section id="q8" class="item" aria-labelledby="q8-title">
    <h2 id="q8-title">8 · Fill‑in‑the‑Blank — Proper Tools and Methods</h2>
    <p>For small parts, hold the work with a <strong>____</strong> and clear swarf with a <strong>____</strong>; never use your hands.</p>
    <label for="q8-tool1" class="block">First blank (e.g., vice, clamp):</label>
    <input type="text" id="q8-tool1" name="q8_tool1" placeholder="vice or clamp" required aria-required="true">
    <label for="q8-tool2" class="block">Second blank (e.g., brush):</label>
    <input type="text" id="q8-tool2" name="q8_tool2" placeholder="brush" required aria-required="true">
    <output id="q8-feedback" role="status" aria-live="polite"></output>
  </section>

  <!-- Q9 -->
  <section id="q9" class="item" aria-labelledby="q9-title">
    <h2 id="q9-title">9 · Assertion–Reason</h2>
    <p>Assertion: Mia created risks for other students.<br>Reason: A spinning workpiece can become a projectile or strike someone nearby.</p>
    <fieldset>
      <legend class="sr-only">Evaluate the assertion and reason</legend>
      <label class="option"><input type="radio" name="q9_choice" value="explains" required> Both true and reason explains the assertion</label>
      <label class="option"><input type="radio" name="q9_choice" value="unrelated"> Both true but unrelated</label>
      <label class="option"><input type="radio" name="q9_choice" value="assert-true-reason-false"> Assertion true, reason false</label>
      <label class="option"><input type="radio" name="q9_choice" value="assert-false-reason-true"> Assertion false, reason true</label>
    </fieldset>
    <output id="q9-feedback" role="status" aria-live="polite"></output>
  </section>

  <!-- Q10 -->
  <section id="q10" class="item" aria-labelledby="q10-title">
    <h2 id="q10-title">10 · Mini Plan — Safe Restart</h2>
    <p>Write a brief 3‑step safe‑restart plan for Mia to complete the drilling task safely. Cover PPE and preparation, proper setup, and running procedure (e.g., tie hair, wear glasses, remove gloves, clamp work, remove key, set guard, correct speed, and clearing swarf). Provide at least 15 words.</p>
    <textarea id="q10-answer" name="q10_answer" rows="4" required aria-required="true"></textarea>
    <output id="q10-feedback" role="status" aria-live="polite"></output>
  </section>

  <!-- Submit -->
  <section class="item">
    <div class="controls">
      <button id="submitAll" type="button">Submit Answers</button>
      <span id="submitMsg" class="hint"></span>
    </div>
  </section>
</main>

<script>
  // Evaluation functions for each question
  function evaluateDQ1() {
    const reason = (document.getElementById('q1-reason').value || '').trim();
    const choice = document.querySelector('input[name="q1_choice"]:checked');
    const out = document.getElementById('q1-feedback');
    const words = reason.split(/\s+/).filter(Boolean).length;
    if (words < 15) {
      out.textContent = "Please write at least 15 words explaining the first unsafe action.";
      out.className = "warning";
      return { score: 0, detail: "reason-too-short" };
    }
    if (!choice) {
      out.textContent = "Select the first unsafe action.";
      out.className = "warning";
      return { score: 0, detail: "no-choice" };
    }
    let score = 0;
    if (choice.value === "key-in") {
      score = 1;
      out.textContent = "Correct: Starting the drill with the chuck key still in the chuck is the first unsafe action.";
      out.className = "success";
    } else if (choice.value === "held-hand") {
      out.textContent = "Not quite — holding the work by hand is unsafe, but it comes after the drill is started with the key still in.";
      out.className = "warning";
    } else if (choice.value === "lean") {
      out.textContent = "Leaning in happens after the drill is running; the key left in the chuck is the first unsafe action.";
      out.className = "warning";
    } else {
      out.textContent = "Reaching for swarf occurs after the machine is running; the key left in is the first unsafe action.";
      out.className = "warning";
    }
    return { score, reasoning_words: words, choice: choice.value, reasoning: reason };
  }

  function evaluateDQ2() {
    const reason = (document.getElementById('q2-reason').value || '').trim();
    const choice = document.querySelector('input[name="q2_choice"]:checked');
    const out = document.getElementById('q2-feedback');
    if (!choice) {
      out.textContent = "Select True or False.";
      out.className = "warning";
      return { score: 0, detail: "no-choice" };
    }
    if (reason.split(/\s+/).length < 5) {
      out.textContent = "Please write at least 5 words explaining why gloves are unsafe.";
      out.className = "warning";
      return { score: 0, detail: "reason-too-short" };
    }
    let score = 0;
    if (choice.value === "false") {
      score = 1;
      out.textContent = "Correct — gloves can get caught in rotation and are not recommended at the drill press.";
      out.className = "success";
    } else {
      out.textContent = "Incorrect — gloves increase entanglement risk and should not be worn when operating the drill press.";
      out.className = "error";
    }
    return { score, choice: choice.value, explanation: reason };
  }

  function evaluateDQ3() {
    const checks = [...document.querySelectorAll('input[name="q3_choice"]:checked')].map(c => c.value);
    const other = (document.getElementById('q3-other').value || '').trim();
    const out = document.getElementById('q3-feedback');
    const correct = ["hair-untied","gloves","key-left","unclamped","no-glasses","reach-swarf","leaning-close"];
    const missed = correct.filter(c => !checks.includes(c));
    const extras = checks.filter(c => !correct.includes(c));
    if (checks.length === 0) {
      out.textContent = "Select at least one hazard.";
      out.className = "warning";
      return { score: 0, detail: "none-selected" };
    }
    let score = 0;
    if (missed.length === 0 && extras.length === 0) {
      score = 1;
      out.textContent = "Well done — you have identified all hazards from the scenario.";
      out.className = "success";
    } else {
      out.textContent = "Check again — you missed: " + (missed.join(", ") || "none") + "; unnecessary: " + (extras.join(", ") || "none") + ".";
      out.className = "warning";
    }
    return { score, selected: checks, other_hazard: other };
  }

  function evaluateDQ4() {
    const choice = document.getElementById('q4-choice').value;
    const out = document.getElementById('q4-feedback');
    if (!choice) {
      out.textContent = "Please choose an option.";
      out.className = "warning";
      return { score: 0, detail: "no-choice" };
    }
    let score = 0;
    if (choice === "stop-remove") {
      score = 1;
      out.textContent = "Correct — stop the drill immediately, wait for it to stop, remove and stow the key.";
      out.className = "success";
    } else if (choice === "grab") {
      out.textContent = "No — trying to grab the key while it's spinning can lead to serious injury.";
      out.className = "error";
    } else if (choice === "ignore") {
      out.textContent = "No — letting the key fly loose endangers you and others.";
      out.className = "error";
    } else {
      out.textContent = "No — asking someone to hold a rotating key is very dangerous.";
      out.className = "error";
    }
    return { score, choice };
  }

  function evaluateDQ5() {
    const ans = (document.getElementById('q5-answer').value || '').trim();
    const out = document.getElementById('q5-feedback');
    if (!ans) {
      out.textContent = "Please provide an explanation.";
      out.className = "warning";
      return { score: 0, detail: "no-answer" };
    }
    const glovesWords = /(glove|gloves)/i.test(ans);
    const entangleWords = /(entangle|caught|grab|snag|wrap|tangle|catch)/i.test(ans);
    const glassesWords = /(glasses|eye|eyes|protect)/i.test(ans);
    if (glovesWords && entangleWords && glassesWords) {
      out.textContent = "Good — your answer highlights entanglement risk from gloves and eye protection need from flying swarf.";
      out.className = "success";
      return { score: 1, answer: ans };
    } else {
      out.textContent = "Try to mention how gloves can get caught and why glasses protect against flying chips or swarf.";
      out.className = "warning";
      return { score: 0, answer: ans };
    }
  }

  function evaluateDQ6() {
    const raw = document.getElementById('q6-answer').value;
    const val = Number(raw);
    const out = document.getElementById('q6-feedback');
    if (!raw.length || Number.isNaN(val)) {
      out.textContent = "Enter a number.";
      out.className = "warning";
      return { score: 0, detail: "no-answer" };
    }
    if (val === 7) {
      out.textContent = "Correct — lower the guard by 7 mm to reach the recommended 5 mm clearance.";
      out.className = "success";
      return { score: 1, answer: val };
    } else if (val < 7) {
      out.textContent = "Too little — subtract the current clearance (12 mm) from the required (5 mm).";
      out.className = "warning";
      return { score: 0, answer: val };
    } else {
      out.textContent = "Too much — you only need to lower it by 7 mm.";
      out.className = "warning";
      return { score: 0, answer: val };
    }
  }

  function evaluateDQ7() {
    const mapping = { q7_row1: "tie", q7_row2: "clamp", q7_row3: "brush", q7_row4: "key" };
    const out = document.getElementById('q7-feedback');
    let correctCount = 0;
    let details = {};
    for (const row in mapping) {
      const selected = document.querySelector('select[name="'+row+'"]').value;
      if (!selected) {
        out.textContent = "Please select a control for each hazard.";
        out.className = "warning";
        return { score: 0, detail: "missing-selection" };
      }
      details[row] = selected;
      if (selected === mapping[row]) correctCount += 1;
    }
    if (correctCount === 4) {
      out.textContent = "Correct — you matched all hazards to their appropriate controls.";
      out.className = "success";
      return { score: 1, selections: details };
    } else {
      out.textContent = "Some matches are incorrect. Review each hazard and control relationship.";
      out.className = "warning";
      return { score: 0, selections: details };
    }
  }

  function evaluateDQ8() {
    const tool1 = (document.getElementById('q8-tool1').value || '').trim().toLowerCase();
    const tool2 = (document.getElementById('q8-tool2').value || '').trim().toLowerCase();
    const out = document.getElementById('q8-feedback');
    const tool1Syn = ["vice","vise","bench vice","bench vise","clamp","clamps","vice clamp","work holding","workholder"];
    const tool2Syn = ["brush","chip brush","wire brush","cleaning brush","swarf brush"];
    const firstOK = tool1Syn.some(s => tool1 === s || tool1.includes(s));
    const secondOK = tool2Syn.some(s => tool2 === s || tool2.includes(s));
    let score = 0;
    if (firstOK && secondOK) {
      score = 1;
      out.textContent = "Correct — use a vice or clamp for holding small workpieces and a brush to clear swarf.";
      out.className = "success";
    } else if (!firstOK && secondOK) {
      out.textContent = "The first blank should be a holding device like a vice or clamp.";
      out.className = "warning";
    } else if (firstOK && !secondOK) {
      out.textContent = "The second blank should be a brush to clear swarf safely.";
      out.className = "warning";
    } else {
      out.textContent = "Check both blanks — think about how to hold the work and clear swarf.";
      out.className = "warning";
    }
    return { score, tool1, tool2 };
  }

  function evaluateDQ9() {
    const choice = document.querySelector('input[name="q9_choice"]:checked');
    const out = document.getElementById('q9-feedback');
    if (!choice) {
      out.textContent = "Please select an option.";
      out.className = "warning";
      return { score: 0, detail: "no-choice" };
    }
    let score = 0;
    if (choice.value === "explains") {
      score = 1;
      out.textContent = "Correct — the reason explains why Mia’s actions put others at risk.";
      out.className = "success";
    } else if (choice.value === "unrelated") {
      out.textContent = "Incorrect — the reason is directly related to the assertion.";
      out.className = "warning";
    } else if (choice.value === "assert-true-reason-false") {
      out.textContent = "Incorrect — the reason is true and provides context for the assertion.";
      out.className = "warning";
    } else {
      out.textContent = "Incorrect — the assertion is true and the reason is accurate.";
      out.className = "warning";
    }
    return { score, choice: choice.value };
  }

  function evaluateDQ10() {
    const answer = (document.getElementById('q10-answer').value || '').trim();
    const out = document.getElementById('q10-feedback');
    const words = answer.split(/\s+/).filter(Boolean).length;
    if (words < 15) {
      out.textContent = "Please provide at least 15 words describing a safe-restart plan.";
      out.className = "warning";
      return { score: 0, detail: "too-short" };
    }
    const hasPPE = /(hair|glasses|eyes|PPE|gloves|goggle)/i.test(answer);
    const hasClamp = /(clamp|vice|vise|secure work)/i.test(answer);
    const hasKey = /(key|chuck|remove)/i.test(answer);
    const hasGuard = /(guard|distance)/i.test(answer);
    const hasSwarf = /(swarf|brush|clean)/i.test(answer);
    let covered = 0;
    if (hasPPE) covered += 1;
    if (hasClamp) covered += 1;
    if (hasKey) covered += 1;
    if (hasGuard) covered += 1;
    if (hasSwarf) covered += 1;
    if (covered >= 3) {
      out.textContent = "Good plan — you've covered multiple safety steps. Keep reinforcing this sequence.";
      out.className = "success";
      return { score: 1, answer };
    } else {
      out.textContent = "Your plan should mention tying back hair/PPE, securing the work, removing the chuck key, setting guard/speed, and clearing swarf.";
      out.className = "warning";
      return { score: 0, answer };
    }
  }

  // Submit all evaluations and log results
  document.getElementById('submitAll').addEventListener('click', () => {
    const result = {
      q1: evaluateDQ1(),
      q2: evaluateDQ2(),
      q3: evaluateDQ3(),
      q4: evaluateDQ4(),
      q5: evaluateDQ5(),
      q6: evaluateDQ6(),
      q7: evaluateDQ7(),
      q8: evaluateDQ8(),
      q9: evaluateDQ9(),
      q10: evaluateDQ10()
    };
    const msg = document.getElementById('submitMsg');
    const allAnswered = Object.values(result).every(r => r && ('score' in r));
    if (allAnswered) {
      msg.textContent = "Submitted. Open your browser console to view the JSON payload.";
      msg.className = "success";
    } else {
      msg.textContent = "Some items are incomplete or need more detail — see the feedback above.";
      msg.className = "warning";
    }
    console.log("Drill press safety assessment results:", result);
  });
</script>
</body>
</html>